!function(i){i("a[data-reveal-id]").live("click",function(e){e.preventDefault();var n=i(this).attr("data-reveal-id");i("#"+n).reveal(i(this).data())}),i.fn.reveal=function(e){var n={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal"},e=i.extend({},n,e);return this.each(function(){function n(){p.unbind("click.modalEvent"),i("."+e.dismissModalClass).unbind("click.modalEvent"),c||(t(),"fadeAndPop"==e.animation&&(d.css({top:i(document).scrollTop()-s,opacity:0,visibility:"visible"}),p.fadeIn(e.animationSpeed/2),d.delay(e.animationSpeed/2).animate({top:i(document).scrollTop()+l+"px",opacity:1},e.animationSpeed,o)),"fade"==e.animation&&(d.css({opacity:0,visibility:"visible",top:i(document).scrollTop()+l}),p.fadeIn(e.animationSpeed/2),d.delay(e.animationSpeed/2).animate({opacity:1},e.animationSpeed,o)),"none"==e.animation&&(d.css({visibility:"visible",top:i(document).scrollTop()+l}),p.css({display:"block"}),o())),d.unbind("reveal:open",n)}function a(){c||(t(),"fadeAndPop"==e.animation&&(p.delay(e.animationSpeed).fadeOut(e.animationSpeed),d.animate({top:i(document).scrollTop()-s+"px",opacity:0},e.animationSpeed/2,function(){d.css({top:l,opacity:1,visibility:"hidden"}),o()})),"fade"==e.animation&&(p.delay(e.animationSpeed).fadeOut(e.animationSpeed),d.animate({opacity:0},e.animationSpeed,function(){d.css({opacity:1,visibility:"hidden",top:l}),o()})),"none"==e.animation&&(d.css({visibility:"hidden",top:l}),p.css({display:"none"}))),d.unbind("reveal:close",a)}function o(){c=!1}function t(){c=!0}var d=i(this),l=parseInt(d.css("top")),s=d.height()+l,c=!1,p=i(".reveal-modal-bg");0==p.length&&(p=i('<div class="reveal-modal-bg" />').insertAfter(d),p.fadeTo("fast",.8)),d.bind("reveal:open",n),d.bind("reveal:close",a),d.trigger("reveal:open");i("."+e.dismissModalClass).bind("click.modalEvent",function(){d.trigger("reveal:close")});e.closeOnBackgroundClick&&(p.css({cursor:"pointer"}),p.bind("click.modalEvent",function(){d.trigger("reveal:close")})),i("body").keyup(function(i){27===i.which&&d.trigger("reveal:close")})})}}(jQuery);
